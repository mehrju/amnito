@model Nop.Plugin.Misc.PhoneLogin.Models.LoginModel
@using System.Net
@using Nop.Core
@inject IWebHelper webHelper
@{
    Layout = "~/Plugins/Orders.MultiShipping/Views/Shared/postexNew/_NewUiLayoutAccount.cshtml";

    //title
    Html.AddTitleParts(T("PageTitle.Login").Text);
    //page class
    Html.AppendPageCssClassParts("html-login-page");

    //register URL with return URL (if specified)
    var registerUrl = "https://postex.ir/register";
    if (!string.IsNullOrEmpty(this.Context.Request.Query["returnUrl"]))
    {
        registerUrl = webHelper.ModifyQueryString(registerUrl, "returnurl=" + WebUtility.UrlEncode(this.Context.Request.Query["returnUrl"]), null);
    }
}
<style>
    @@media(max-width:961px) {
        #myDiv {
            margin-top: 25px !important;
        }
        #loginContiner
        {
            margin-top:0px !important;
        }
        .tinLoginControl {
            height: 40px !important;
        }
        input.tinLoginControl {
            padding: 1rem !important;
        }
        h4{
            display:none;
        }
    }
</style>
<form asp-route="Login" asp-route-returnurl="@Context.Request.Query["ReturnUrl"]" method="post" class="form-sign-up">

    <div class="mt-3">
        <div class="row">
            <div class="col-xl-10 col-lg-10 col-md-10 col-sm-10 col-12 m-auto">
                <div class="shadow mb-5 p-4 rounded bg-white js-active" data-animation="scaleIn">
                    <div class="multisteps-form__content">
                        <div class="form-row mt-4" id="loginContiner">
                            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                                <label asp-for="Username">شماره موبایل:</label>
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend tinLoginControl">
                                        <span class="input-group-text" id="basic-addon1">
                                            <i class="fas fa-user"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="formLogin form-control p-4 tinLoginControl" aria-label="Username" asp-for="Username"
                                           aria-describedby="basic-addon1">
                                </div>
                                <label asp-for="Password">رمز عبور:</label>
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend tinLoginControl">
                                        <span class="input-group-text" id="basic-addon1">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                    </div>
                                    <input type="password" class="formLogin form-control p-4 tinLoginControl" aria-label="password" asp-for="Password"
                                           aria-describedby="basic-addon1">
                                </div>
                                <div class="row">

                                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6" >
                                        <div class="checkbox">
                                            <input type="checkbox" id="cbx1" style="display: none;">
                                            <label for="cbx1" class="check">
                                                <svg width="18px" height="18px" viewBox="0 0 18 18">
                                                    <path d="M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,
                              2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z">
                                                    </path>
                                                    <polyline points="1 9 7 14 15 4"></polyline>
                                                </svg>
                                            </label>
                                            <label> مرا به خاطر داشته باش</label>
                                        </div>
                                        <div class="checkbox mb-2" style="display:none">

                                            <input type="checkbox" id="SupperAdmin" style="display: none;">
                                            <label for="SupperAdmin" class="check">
                                                <svg width="18px" height="18px" viewBox="0 0 18 18">
                                                    <path d="M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,
                              2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z">
                                                    </path>
                                                    <polyline points="1 9 7 14 15 4"></polyline>
                                                </svg>
                                            </label>

                                            <label>مدیر ارشد</label>
                                        </div>

                                    </div>

                                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6">
                                        <a asp-route="PasswordRecovery" style="color: #f7941d">
                                            <p class=" mb-2" style="text-align: end;">فراموشی رمز عبور؟</p>
                                        </a>
                                    </div>

                                </div>

                                <div class="col-12 mb-4">
                                    <p style="text-align: center;"> کاربر جدید هستید؟ <a href="@registerUrl" style="color: #f7941d">ثبت نام در امنیتو</a></p>
                                </div>
                                <label id="SupperAdminCodeLable" style="display:none">مدیر ارشد:</label>
                                <div class="input-group mb-3" id="SupperAdminCodeContainer" style="display:none">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="basic-addon1">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                    </div>
                                    <input type="password" class="formLogin form-control p-4" aria-label="Username"
                                           aria-describedby="basic-addon1" id="SupperAdminCode" name="SupperAdminCode" placeholder="کد امنیتی را وارد نمایید">
                                </div>
                                <div class="error-user text-danger">
                                    <div asp-validation-summary="ModelOnly" class="message-error"></div>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <a href="/">
                                        <button class="button btn js-btn-prev mr-3" type="button" title="Prev">
                                            <span></span>بازگشت به خانه
                                        </button>
                                    </a>
                                    <button class="button btn btn-success basebtn ml-3" type="submit" title="Next">
                                        ورود به سایت<p></p>
                                    </button>
                                </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 d-flex">
                                <img class="rounded mx-auto d-block" src="~/Themes/postexNew/images/imgLogin.png" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</form>
<script>
    $(document).ready(function () {
        document.getElementById('Username').addEventListener('input', event =>
            event.target.value = ToJsutNumber(event.target.value)
        );

        $('#SupperAdmin').change(function () {
            $('#SupperAdminCode').val('');
            if ($(this).is(':checked')) {
                $('#SupperAdminCodeContainer').show();
                $('#SupperAdminCodeLable').show();
            }
            else {
                $('#SupperAdminCodeContainer').hide();
                $('#SupperAdminCodeLable').hide();
            }
        });
    });


    function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }


    $(function () {

        $("form").submit(function (event) {
            number = $('#Usernamer').val();
            pass = $('Password').val();
            if (number != 'enamad' && (number.length == 0 || number.length != 11)) {
                $('.input-phone-number').popover('show');
                event.preventDefault();
            }
            if (pass.length == 0) {
                $('.input-pass-number').popover('show');
                event.preventDefault();
            }
            var cookies = document.cookie.split(";");
            for (var i = 0; i < cookies.length; i++)
                setCookie(cookies[i].split("=")[0], "", -1);
        });

        if ($('.message-error').text() == '') {
            $('.error-user').css('display', 'none');
        } else {
            $('.error-user').css('display', 'block');
        }

        //$(".form-sign-up").validate({
        //    rules: {
        //        Password: "required",
        //        Username: {
        //            required: true,
        //            minlength: 11,
        //            maxlength: 11
        //        },
        //    },
        //    messages: {
        //        Password: "کلمه عبور اجباریست",
        //        Username: {
        //            required: "شماره تلفن اجباریست",
        //            minlength: "طول شماره موبایل باید 11 رقم باشد",
        //            maxlength: "طول شماره موبایل باید 11 رقم باشد"
        //        },
        //    }
        //});

    });

    function validate(evt) {
        var theEvent = evt || window.event;

        // Handle paste
        if (theEvent.type === 'paste') {
            key = event.clipboardData.getData('text/plain');
        } else {
            // Handle key press
            var key = theEvent.keyCode || theEvent.which;
            key = String.fromCharCode(key);
        }
        var regex = /[0-9]|\./;
        if (!regex.test(key)) {
            theEvent.returnValue = false;
            if (theEvent.preventDefault) theEvent.preventDefault();
        }
    }

</script>
