@model Nop.Plugin.Orders.MultiShipping.Models.NewCheckoutViewModel
@inherits Nop.Web.Framework.Mvc.Razor.NopRazorPage<TModel>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Nop.Web.Framework
@inject Nop.plugin.Orders.ExtendedShipment.Services.IExtendedShipmentService _extendedShipmentService
@inject Nop.Core.IWorkContext _workContext;
@{
    Layout = "~/Plugins/Orders.MultiShipping/Views/Shared/Sep/Sep_NewUiLayout.cshtml";
    Html.AppendCssFileParts("https://static.neshan.org/sdk/leaflet/1.4.0/leaflet.css");
    Html.AppendCssFileParts("~/Plugins/Orders.MultiShipping/Content/MapResource/css/BootSideMenu.css");
    Html.AppendCssFileParts("~/Plugins/Orders.MultiShipping/Content/MapResource/css/searchbox.css");
    Html.AppendCssFileParts("~/Plugins/Orders.MultiShipping/Content/MapResource/css/jquery.md.bootstrap.datetimepicker.style.css?ver=5");

    #region GeoJsondata
    #region Privatepost
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/PrivatePost/GeoJsonData/_1.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/PrivatePost/GeoJsonData/_2.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/PrivatePost/GeoJsonData/_3.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/PrivatePost/GeoJsonData/_4.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/PrivatePost/GeoJsonData/_5.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/PrivatePost/GeoJsonData/_6.js");
    #endregion
    #region Privatepost
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Alborz_5.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/get_geojson_4.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Isfahan_2.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Mashad_7.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Shiraz_6.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Tabriz_3.js");

    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_1.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_2.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_3.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_4.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_5.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_6.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_7.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_8.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_9.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_10.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_11.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_12.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_13.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_14.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_15.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_16.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_17.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_18.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_19.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_20.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_21.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/tca_22.js");

    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Ahvaz_1.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Ahvaz_2.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Tabriz_1.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/CollectorAndDistributer/GeoJsonData/Tabriz_2.js");
    #endregion
    #region Post
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/11_1.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/13_2.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/14_4.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/15_6.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/16_7.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/17_8.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/18_3.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/Post/GeoJsonData/19_5.js");
    #endregion
    #endregion

    Html.AppendScriptParts(ResourceLocation.Footer, "https://static.neshan.org/sdk/leaflet/1.4.0/leaflet.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/js/Autolinker.min.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/js/leaflet.customsearchbox.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/js/leaflet.pattern.js");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/js/leaflet-pip.js");
    //Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/jquery.ajax-cross-origin.min.js");

    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/js/BootSideMenu.js");

    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/MapResource/js/Ap_MapConfig_.js?ver=29");
    Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/ForDatepicker/jquery.mousewheel.min.js?ver=9");
    //Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/ForDatepicker/jQuery.WSlot.min.js?ver=9");
    //Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/ForDatepicker/jalali-moment.browser.js?ver=9");
    //Html.AppendScriptParts(ResourceLocation.Footer, "~/Plugins/Orders.MultiShipping/Content/ForDatepicker/datePicker.js?ver=12");


    string _postArea = Model.postArea == Nop.Plugin.Orders.MultiShipping.Models.PostArea.Foreign ? "پست خارجی" :
(Model.postArea == Nop.Plugin.Orders.MultiShipping.Models.PostArea.Heavy ? "حمل و نقل سنگین" : "پست داخلی");
    bool IsForegin = Model.postArea == Nop.Plugin.Orders.MultiShipping.Models.PostArea.Foreign;
    bool IsHeavy = Model.postArea == Nop.Plugin.Orders.MultiShipping.Models.PostArea.Heavy;
    string PostItem = IsHeavy ? "بار" : "مرسوله";
    string WeightType = IsHeavy ? "تن" : "گرم";
    bool? hasValidAvatar = _extendedShipmentService.hasValidAvatar(_workContext.CurrentCustomer.Id);
    int AvaterState = !hasValidAvatar.HasValue ? 1 : (!hasValidAvatar.Value ? 2 : 3);

}
<script>
    $('#loader').show();
    $(document).ready(function () {
        $('#loader').hide();
        $('#checkoutDiv').show();
    });
</script>
<div id="checkoutDiv" style="display:none">
    <style>
        .fix-modal {
            position: fixed;
            top: 0;
        }

        .fa-check {
            color: #2f99fb;
            cursor: pointer;
        }

            .fa-check:hover {
                color: #4cb439;
                font-size: 16pt;
            }

        .reViewData {
            padding-right: 10px;
            font-size: 10pt;
        }

        .custom-btn-01 {
            cursor: pointer;
            color: white !important;
        }

        #discountCouponCode {
            margin-top: 10px;
            border-color: gray;
            text-align: center;
            border-style: solid;
            border-radius: 3px;
            border-top: 1px;
            border-bottom: 1px;
            border-bottom-style: dotted;
            border-top-style: dotted;
        }

        .searchResult:hover {
            margin: 3px;
            font-weight: bolder;
            -webkit-box-shadow: 10px 10px 13px -2px rgba(153,147,153,0.81);
            -moz-box-shadow: 10px 10px 13px -2px rgba(153,147,153,0.81);
            box-shadow: 10px 10px 13px -2px rgba(153,147,153,0.81);
            cursor: pointer !important;
            background-color: #00d36d;
        }

        .get-btn-map {
            cursor: pointer !important;
            border: 1px !important;
            border-style: solid !important;
        }

            .get-btn-map:hover {
                font-weight: bolder;
                background-color: #22b228 !important;
                box-shadow: 0px 10px 10px rgba(0,0,0,0.2);
                transform: translateY(-3px);
            }
    </style>
    <span></span>
    <main class="backblue" id="orderSteps">
        <input id="checkOutModelItemId" type="hidden" />
        <input id="isForginRequest" type="hidden" value="@(IsForegin.ToString().ToLower())" />

        <div class="container-fluid">
            <div class="row" style="min-height:100%">
                <div class="col-md-12" style="padding-left: 5px !important;padding-right: 5px !important;">
                    <form action="" id="wizard" style="padding:7px">
                        <!-- SECTION 1 -->
                        <h2 class="text-hide">اطلاعات مرسوله و آدرس</h2>
                        <section class="postal-info">
                            <div class="col-md-12 col-lg-6 col-xl-6 col-sm-12 pad-0">
                                <div class="form-content form-col pad-0">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-header">
                                                <h3 style="font-size:17px">اطلاعات مرسوله و آدرس</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field">
                                            <input type="text"
                                                   required
                                                   class="form-control myTooltip"
                                                   maxlength="100"
                                                   id="GoodsType"
                                                   name="GoodsType"
                                                   data-toggle="tooltip"
                                                   autocomplete="on"
                                                   placeholder="محتویات @(PostItem)"
                                                   data-html="true"
                                                   title="@("<a class=\"tooltipLink\" onClick=\"showTooltipmessage('postalBans')\" ><i class=\"fa fa-question-circle-o\" aria-hidden=\"true\"></i></a>")">
                                            @*<label for="GoodsType" title="" data-title="محتویات @(PostItem)"></label>*@
                                        </div>
                                        <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field">
                                            <input type="text"
                                                   required
                                                   class="form-control myTooltip"
                                                   maxlength="@(IsHeavy?2:(IsForegin?6:7))"
                                                   placeholder="وزن @(PostItem)(@(WeightType))"
                                                   id="Weight_g"
                                                   name="Weight_g"
                                                   data-toggle="tooltip"
                                                   data-html="true"
                                                   autocomplete="on"
                                                   title="@("<a class=\"tooltipLink\" onClick=\"showTooltipmessage('weightBans')\" ><i class=\"fa fa-question-circle-o\" aria-hidden=\"true\"></i></a>")">
                                            @*<label for="Weight_g" title="وزن @(PostItem)(@(WeightType))" data-title="وزن @(PostItem)(@(WeightType))"></label>*@

                                        </div>
                                        <div class="w-100"></div>
                                        <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field">
                                            <input type="text"
                                                   class="form-control myTooltip"
                                                   maxlength="12"
                                                   required
                                                   id="ApproximateValue"
                                                   name="ApproximateValue"
                                                   data-toggle="tooltip"
                                                   data-html="true"
                                                   autocomplete="on"
                                                   placeholder="ارزش ریالی @(PostItem)"
                                                   title="ارزش مرسوله.در صورتی که ارزش دقیق مرسوله اطلاع ندارید.عدد 1 را وارد کنید" />
                                            @*<label for="ApproximateValue" title="ارزش ریالی @(PostItem)" data-title="ارزش ریالی @(PostItem)"></label>*@
                                            <input type="hidden" id="CodGoodsPrice" />
                                        </div>
                                        <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field">
                                            <input type="text"
                                                   required
                                                   max="50"
                                                   min="1"
                                                   class="form-control myTooltip"
                                                   id="Count"
                                                   name="Count"
                                                   data-toggle="tooltip"
                                                   data-html="true"
                                                   value="1"
                                                   autocomplete="on"
                                                   maxlength="3"
                                                   title="@(!IsHeavy?"چه تعداد بسته پستی با وزنی که اظهار کردید می خواهید ارسال کنید":"تعداد خودرو مورد نیاز")"
                                                   style="text-align:left">
                                            <label style="position: absolute;top: -15px !important;width: 150px;right: 1px;" for="Count" title="@(!IsHeavy ? "تعداد بسته پستی" : "تعداد خودرو")" data-title="@(!IsHeavy ? "تعداد بسته پستی" : "تعداد خودرو")"></label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        @if (!IsHeavy)
                                        {
                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field">

                                                <select class="js-example-basic-single form-control " name="KartonLafaf" id="KartonLafaf" data-toggle="tooltip" title="اگر @(PostItem) شما نیاز به کارتن دارد"></select>
                                            </div>


                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field" style="display:none">
                                                <select class="js-example-basic-single form-control" required name="boxType" id="boxType">
                                                    <option value="-1" disabled selected>نوع @(PostItem)</option>
                                                    <option value="پاکت">پاکت(اوراق و اسناد)</option>
                                                    <option value="بسته">بسته(کارتن،جعبه)</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 " id="dimenationsBox" style="display:none">
                                                <label style="margin-top:0px !important"> لطفا ابعاد مرسوله را به سانتی متر وارد نمایید</label>
                                                <div class="row">
                                                    <div class="col-md-4 col-sm-4 col-xl-4 col-lg-4 col-xs-4 col-4 field">
                                                        <input type="text" placeholder="طول" autocomplete="on" required class="form-control myTooltip" maxlength="3" id="length" name="length" data-html="true" data-toggle="tooltip"
                                                               title="@("<a class=\"tooltipLink\" onClick=\"showTooltipmessage('dimensionsBans')\" ><i class=\"fa fa-question-circle-o\" aria-hidden=\"true\"></i></a>")">
                                                        @*<label for="length" title="طول" data-title="طول"></label>*@
                                                    </div>
                                                    <div class="col-md-4 col-sm-4 col-xl-4 col-lg-4 col-xs-4 col-4 field">
                                                        <input type="text" required placeholder="عرض" autocomplete="on" class="form-control myTooltip" maxlength="3" id="width" name="width" data-html="true" data-toggle="tooltip"
                                                               title="@("<a class=\"tooltipLink\" onClick=\"showTooltipmessage('dimensionsBans')\" ><i class=\"fa fa-question-circle-o\" aria-hidden=\"true\"></i></a>")">
                                                        @*<label for="width" title="عرض" data-title="عرض"></label>*@
                                                    </div>
                                                    <div class="col-md-4 col-sm-4 col-xl-4 col-lg-4 col-xs-4 col-4 field">
                                                        <input type="text" required autocomplete="on" placeholder="ارتفاع" class="form-control myTooltip" maxlength="3" id="height" name="height" data-html="true" data-toggle="tooltip"
                                                               title="@("<a class=\"tooltipLink\" onClick=\"showTooltipmessage('dimensionsBans')\" ><i class=\"fa fa-question-circle-o\" aria-hidden=\"true\"></i></a>")">
                                                        @*<label for="height" title="ارتفاع" data-title="ارتفاع"></label>*@
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field" id="needCatonWrapper">
                                                <label style="margin-top:9px !important;font-size: 9pt;">آیا به پاکت یا کارتن برای مرسوله خود احتیاج دارید؟</label>
                                                <input type="checkbox" class="form-control myTooltip" id="needCaton" title="با انتخاب این گزینه کارتن و لفاف بندی شما در مرکز پستی یا نمایندگی صورت می پذیرد" style="position: relative;width: 20px;float: left;top: -0px;" />
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 selectfield">
                                                <select class="js-example-basic-single form-control" name="UbbraTruckType" id="UbbraTruckType"></select>
                                            </div>
                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 selectfield">
                                                <select class="js-example-basic-single form-control" name="VechileOptions" id="VechileOptions"></select>
                                            </div>
                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 selectfield">
                                                <select class="js-example-basic-single form-control" name="UbbarPackingLoad" id="UbbarPackingLoad">
                                                    <option value="0">نوع بسته بندی بار</option>
                                                    <option value="karton">کارتن</option>
                                                    <option value="pallet">پالت</option>
                                                    <option value="roll">رل</option>
                                                    <option value="falleh">فله</option>
                                                    <option value="bandil">بندیل</option>
                                                    <option value="kiseh_gooni">کیسه-گونی</option>
                                                </select>
                                            </div>
                                            @*<div class="col-md-6 col-sm-12 col-xl-6 col-lg-6">
                                                <label for="UbbarShippingDoc">سند حمل<span class="org-color">*</span></label>
                                                <select class="js-example-basic-single form-control" name="UbbarShippingDoc" id="UbbarShippingDoc">

                                                </select>
                                                </div>*@
                                            <div class="col-md-6 col-sm-12 col-xl-6 col-lg-6 field">

                                                <input type="text" id="dispatch_date" class="form-control" placeholder="تاریخ و ساعت بارگیری"
                                                       aria-label="_dispatch_date" aria-describedby="_dispatch_date">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text cursor-pointer" id="_dispatch_date" style="top:0px !important;padding: 6px;background-color: transparent;">
                                                        <img src="~/Themes/Ap/images/ApImages/calendar.png" />
                                                    </span>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                    <div class="row" style="height: auto;">
                                        <div class="col-md-12 col-xl-12 col-lg-12 col-sm-12" style="padding:0px">
                                            <label style="margin-top: 0px;">آدرس فرستنده <span class="org-color"></span></label>
                                            <div class="map-btn-input" style="height:35px">
                                                <a class="get-btn-map_i faa-parent animated-hover myTooltip" title="انتخاب آدرس از بین آدرس هایی که قبلا با آن ثبت سفارش پستی انجام داده اید"
                                                   data-toggle="tooltip" data-html="true" id="get-btn-map_i" data-val="Sender" data-type="OldAddress" aria-hidden="true">
                                                    <span class="addAddress">
                                                        انتخاب آدرس قبلی
                                                    </span>

                                                </a>
                                                <a class="get-btn-map faa-parent animated-hover myTooltip" title="ثبت آدرس جدید پستی"
                                                   data-toggle="tooltip" data-html="true" id="get-btn-map" data-val="Sender" data-type="newAddress" aria-hidden="true">
                                                    <span class="addAddress">
                                                        ثبت آدرس جدید
                                                    </span>
                                                </a>
                                            </div>
                                            <label id="SenderStateTown" style="color: #ffffff !important;font-size:9pt"></label>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 col-xl-12 col-lg-12 col-sm-12" style="padding:0px">
                                            <label style="margin-top: 0px;">آدرس گیرنده <span class="org-color"></span></label>
                                            <div class="map-btn-input" style="height:35px">
                                                <a class="get-btn-map_i faa-parent animated-hover myTooltip" title="انتخاب آدرس از بین آدرس هایی که قبلا با آن ثبت سفارش پستی انجام داده اید"
                                                   data-toggle="tooltip" data-html="true" style="cursor:pointer" id="get-btn-map_i" data-val="Reciver" data-type="OldAddress" aria-hidden="true">
                                                    <span class="addAddress">
                                                        انتخاب آدرس قبلی
                                                    </span>
                                                </a>
                                                <a class="get-btn-map faa-parent animated-hover myTooltip" title="ثبت آدرس جدید پستی" data-toggle="tooltip"
                                                   data-html="true" style="cursor:pointer" id="get-btn-map" data-val="Reciver" data-type="newAddress" aria-hidden="true">
                                                    <span class="addAddress">
                                                        ثبت آدرس جدید
                                                    </span>
                                                </a>
                                            </div>
                                            <label id="ReceiverStateTown" style="color: #ffffff !important;font-size:9pt"></label>

                                        </div>
                                    </div>
                                    <input type="hidden" id="SenderLat" name="SenderLat" />
                                    <input type="hidden" id="SenderLon" name="SenderLon" />
                                    <input type="hidden" id="ReciverLat" name="ReciverLat" />
                                    <input type="hidden" id="ReciverLon" name="ReciverLon" />


                                </div>
                            </div>
                        </section>

                        <!-- SECTION 2 -->
                        <h2 class="text-hide">انتخاب سرویس</h2>
                        <section class="choose-services">

                            <div class="col-md-12 col-lg-6 col-xl-6 col-sm-12 pad-0">
                                <div class="form-content form-col pad-0">

                                    <h3>انتخاب سرویس</h3>

                                    <table id="tblServiceInfo" class="table table-bordered  table-hover">

                                        <tbody></tbody>

                                    </table>
                                    <div class="checkbox">
                                        @*<label><input id="acceptRole" type="checkbox" value=""><a target="_blank" href="/%D9%82%D9%88%D8%A7%D9%86%DB%8C%D9%86-%D8%A7%D8%B3%D8%AA%D9%81%D8%A7%D8%AF%D9%87-%D8%A7%D8%B2-%D8%B3%D8%A7%D9%85%D8%A7%D9%86%D9%87" class="org-color">قوانین</a> را خواندم و قبول دارم</label>*@
                                        <label><input id="acceptRole" type="checkbox" value=""><a onclick="divload()" class="org-color" style="text-decoration:underline !important">قوانین</a></label>

                                    </div>

                                </div>
                            </div>

                        </section>

                        <!-- SECTION 3 -->
                        <h2 class="text-hide">خدمات ما</h2>
                        <section class="services_us">
                            <div id="ExtraRequest" class="col-md-12 col-lg-6 col-xl-6 col-sm-12 pad-0">
                                <div class="form-content form-col pad-0">
                                    <div class="form-header">
                                        <h3 style="padding-bottom: 0px;">انتخاب خدمات مورد نیاز</h3>
                                    </div>
                                    <div class="row" style="@(IsHeavy?"display:none":"")">
                                        <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12 bime selectfield" id="bime">
                                            <select class="js-example-basicsingle form-control" name="Insurance" id="Insurance" data-toggle="tooltip" data-html="true" title="@(PostItem) تون رو بیمه کنید"></select>
                                        </div>
                                    </div>
                                    <div class="row" style="@(IsHeavy?"display:none":"")">
                                        <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12 selectfield">
                                            <div>
                                                <select class="js-example-basic-single form-control myTooltip" name="HasAccessToPrinter" id="HasAccessToPrinter" data-toggle="tooltip" data-html="true" title="فاکتور پستی باید چاپ و روی بسته چسبانده شود">
                                                    <option value="@(IsHeavy?"true":"")" selected="selected" disabled>چاپ فاکتور</option>
                                                    <option value="true">بله خودم میتونم چاپ کنم </option>
                                                    <option value="false">فاکتور سفارش رو برام چاپ و الصاق کنید</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" style="@(IsHeavy?"display:none":"")">
                                        <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12 field">
                                            <div>
                                                <input type="checkbox" value="" style="width:auto !important;float: right;margin-left: 10px;" id="hasNotifRequest" class="myTooltip" name="hasNotifRequest" data-toggle="tooltip" data-html="true" title="اگر میخواید شما و گیرنده بدونید @(PostItem) در هر لحظه کجاست" />
                                                <label style="font-size:10px;margin-top: 0px;float:left">
                                                    درخواست دریافت پیامک اطلاع رسانی از وضعیت مرسوله دارم
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" style="@(IsHeavy?"display:none":"")">
                                        <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12 field">
                                            <div>
                                                <input type="checkbox" data-val="@(AvaterState)" style="width:auto !important;float: right;margin-left: 10px;" data-customerId="@(_workContext.CurrentCustomer.Id)" value="" id="RequestPrintAvatar" class="myTooltip" name="RequestPrintAvatar" data-toggle="tooltip" data-html="true" title="در صورتی که نشان تجاری خود را درقسمت حساب من سامانه وارد کرده باشید و به تایید کارشناسان ما رسیده باشد، امکان استفاده از این گزینه وجود دارد" />
                                                <label style="font-size:10px;margin-top: 0px;float:left">
                                                    درخواست چاپ نشان تجاری (لوگو) بر روی فاکتور دارم
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    @if (!IsHeavy)
                                    {
                                        <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12 form-group">
                                            <input type="text" id="PostCoordinationData" class="form-control" placeholder="تاریخ جمع آوری مرسوله(اختیاری)" aria-label="_dispatch_date" aria-describedby="_dispatch_date">

                                            <div class="input-group-prepend">
                                                <span class="input-group-text cursor-pointer" id="_PostCoordinationData" style="top:0px !important;padding: 6px;background-color: transparent;margin-left: 17px;padding-top: 4px !important;" data-mdpersiandatetimepicker="" data-original-title="" title="">
                                                    <img src="/Themes/Ap/images/ApImages/calendar.png">
                                                </span>
                                            </div>
                                        </div>
                                    }
                                    <div class="row" style="display:none">
                                        <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12 form-group">
                                            <div class="checkbox" id="pickUpNow">
                                                <label><input type="checkbox" value="" id="getItNow" />بیا همین الان بارم را ببر </label>
                                            </div>
                                        </div>
                                    </div>
                                    @if (Model.IsAgent)
                                    {
                                        <div class="row">
                                            <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12 form-group">
                                                <label for="">مبلغ خدمات نمایندگی <span class="org-color"></span></label>
                                                <input type="text" autocomplete="on" class="form-control myTooltip" maxlength="12" placeholder="مبلغ را به صورت عددی وارد کنید" required id="AgentSaleAmount" name="AgentSaleAmount" data-toggle="tooltip" data-html="true" title="در صورتی که خدمت اضافی انجام داده اید میتوانید هزینه آنرا در این قسمت اضافه کنید" />
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>

                        </section>

                    </form>
                </div>
            </div>
        </div>
    </main>
    <div style="display:none" id="ReViewData">
        <!-- 3 columns offset Center -->
        <div class="container">
            <div class="row">

                <div class="col-xs-12 col-sm-6 col-md-1">

                </div>

                <div class="col-xs-12 col-sm-6 col-md-10">
                    <div class="box" style="margin-bottom:0px !important">
                        <div class="body_res">
                            <div class="row">
                                <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                    <label>نوع کالا: </label><span class="reViewData" id="_GoodsType"></span>
                                </div>
                                <div class="col-md-6" style="position: absolute;width: 40% !important;left: 10px;top: 3px;">
                                    <div class="btn_edit_res">
                                        <a class="custom-btn-01 faa-parent animated-hover editStep" data-val="2" tabindex="-1"><i class="fa fa-edit faa-flash">ویرایش  </i></a>
                                    </div>
                                </div>
                                <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                    <label>قیمت حدودی کالا: </label><span class="reViewData" id="_ApproximateValue"></span>
                                </div>
                                <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                    <label>وزن : </label><span class="reViewData" id="_Weight"></span>
                                </div>
                                <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                    <label>تعداد : </label><span class="reViewData" id="_Count"></span>
                                </div>
                                @if (!IsHeavy)
                                {
                                    <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                        <label>ابعاد: </label><span class="reViewData" id="_dimensions"></span>
                                    </div>
                                    <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                        <label>نوع بسته بندی: </label><span class="reViewData" id="_boxType"></span>
                                    </div>
                                }
                                else
                                {
                                    <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                        <label>نوع خودرو: </label><span class="reViewData" id="_UbbraTruckType"></span>
                                    </div>
                                    <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                        <label>ویژگی خودرو: </label><span class="reViewData" id="_VechileOptions"></span>
                                    </div>
                                    <div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                        <label>نوع بسته بندی بار: </label><span class="reViewData" id="_UbbarPackingLoad"></span>
                                    </div>
                                }
                            </div>
                            <div class="row">
                                <div class="col-md-9 col-xl-9 col-lg-9 col-sm-12">
                                    <div class="address-Sender">
                                        <label>آدرس فرستنده:</label><span class="reViewData" id="_billingAddressModel"></span>
                                    </div>
                                    <div class="addres_Receiver">
                                        <label>آدرس گیرنده:</label><span class="reViewData" id="_shippingAddressModel"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-9 col-xl-9 col-lg-9 col-sm-12">
                                    <label>نوع سرویس:</label><span class="reViewData" id="_ServiceId"></span>
                                </div>
                                @*<div class="col-md-3 col-xl-3 col-lg-3 col-sm-12">
                                        <div class="btn_edit_res">
                                            <a class="custom-btn-01 faa-parent animated-hover editStep" data-val="1">ویرایش <i class="fa fa-edit faa-flash"></i></a>
                                        </div>
                                    </div>*@
                            </div>
                            @if (!IsHeavy)
                            {
                                <div class="row">
                                    <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12">
                                        <label>بیمه :</label><span class="reViewData" id="_InsuranceName"></span>
                                    </div>
                                    <div class="col-md-6 col-xl-6 col-lg-6 col-sm-12">
                                        <label>جعبه و بسته بندی :</label><span class="reViewData" id="_CartonSizeName"></span>
                                    </div>
                                </div>
                            }
                            <div class="row">
                                <div class="col-md-9">
                                    @if (!IsHeavy)
                                    {
                                        <div class="checkbox">
                                            <label><input type="checkbox" disabled id="_HasAccessToPrinter" value="">در خواست چاپ فاکتور جهت الصاق روی بسته</label>
                                        </div>
                                        <div class="checkbox">
                                            <label><input type="checkbox" disabled id="_hasNotifRequest" value="" />در خواست اطلاع رسانی در هر مرحله از ارسال</label>
                                        </div>
                                        <div class="checkbox" style="display:none">
                                            <label><input type="checkbox" disabled id="_getItNow" value="" />بیا همین الان بارم را ببر </label>
                                        </div>
                                    }
                                    <div class="checkbox">
                                        <label><input type="checkbox" disabled id="_RequestPrintAvatar" value="" />چاپ نشان تجاری من بر روی فاکتور</label>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                    <div class="footer_res">
                        <div class="row">
                            <div class="col-md-4 col-xl-4 col-lg-6 col-sm-12 ">
                                <input autocomplete="on" type="text" class="form-control myTooltip" maxlength="50"
                                       placeholder=" کد کوپن تخفیف را وارد نمایید" required="" id="discountCouponCode" name="discountCouponCode" data-toggle="tooltip" data-html="true" title="" data-original-title="در صورتی که کوپن تخفیف دارید کد آنرا وارد کنید">
                            </div>
                            <div class="col-md-4 col-xl-4 col-lg-4 col-sm-12">
                                <div class="btn-forward">
                                    <a id="btn_SaveNext" class="custom-btn-02 btnNext faa-parent animated-hover" style="width:100% !important">تاییدو مشاهده فاکتور <i class="fa fa-chevron-left faa-horizontal"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xs-12 col-sm-12 col-md-1">

                </div>

            </div>
        </div>
        <div id="loading-img">
            <button class="btn btn-info">در حال پردازش....</button>
        </div>
    </div>
    <div class="modal fade bd-example-modal-lg" role="dialog" aria-labelledby="MapAddressModalLabel" id="mapModal" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="row" style="width:100% !important">
                        <div class="col-md-12 col-lg-12 col-xl-12 col-sm-12" style="text-align: left;margin: 0;padding: 0;padding-right: 10px;">
                            <h5 class="modal-title" id="MapAddressModalLabel" style="float: right;">آدرس</h5>
                            <a style="color:black;float:left;margin:0px;padding:0px"><i class="fa fa-map-marker" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
                <div class="modal-body" id="modalBody" style="padding-bottom: 5px !important;">
                    <div class="form-horizontal">
                        <div class="row" id="mapContent">
                            <div class="col-md-12 col-lg-12 col-xl-12 col-sm-12">
                                <div class="row" id="AddressContent">
                                    <div id="oldAddressbox" class="col-md-12 col-lg-12 col-xl-12 col-sm-12" style="display:none;">
                                        <div class="form-group">
                                            <select class="js-example-basic-single form-control" name="AddressBox" data-toggle="tooltip" id="AddressBox" title="قسمتی از متن آدرس را وارد کنید{استان،شهر،آدرس،موبایل،نام،نام خانوادگی}"></select>
                                        </div>
                                        @*<hr style="border-color:black !important;margin-top:0px;" />*@
                                    </div>

                                    <div id="_NewAddress" class="col-md-12 col-lg-12 col-xl-12 col-sm-12" style="display:none">
                                        <div class="form-group field" id="_CountryDiv">
                                            <select class="form-control" name="Country" id="Country" style="width:100% !important"></select>
                                        </div>
                                        <div class="form-group field" id="_StateDiv">
                                            <select class="form-control" name="State" id="State" style="width:100% !important"></select>
                                            <input id="tempStateName" type="hidden" />
                                        </div>
                                        <div class="form-group field" id="_foreignCountryDiv" style="display:none" style="width:100% !important">
                                            <select class="form-control" name="receiver_ForeginCountry" id="receiver_ForeginCountry"></select>
                                        </div>
                                        <div class="form-group field" id="_ForeginCountryCityDiv" style="display:none">
                                            <input autocomplete="on" req type="text" class="form-control" required id="receiver_ForeginCountryCity" placeholder="نام شهر" name="receiver_ForeginCountryCity" />
                                            @*<label for="receiver_ForeginCountryCity" title="نام شهر" data-title="نام شهر"></label>*@
                                        </div>
                                        <div class="form-group  field">
                                            <input autocomplete="on" type="text" class="form-control" required placeholder="نام" id="FirstName" name="FirstName" />
                                            @*<label for="FirstName" title="نام" data-title="نام"></label>*@
                                        </div>
                                        <div class="form-group  field">
                                            <input autocomplete="on" type="text" class="form-control" placeholder="نام خانوادگی" required id="LastName" name="LastName" />
                                            @*<label for="LastName" title="نام خانوادگی" data-title="نام خانوادگی"></label>*@
                                        </div>
                                        <div class="form-group  field">
                                            <input autocomplete="on" type="text" class="form-control" required id="PhoneNumber" placeholder="تلفن همراه" maxlength="@(!IsForegin?11:15)" name="PhoneNumber" />
                                            @*<label for="PhoneNumber" title="تلفن همراه" data-title="تلفن همراه"></label>*@
                                        </div>
                                        <div style="display:none" class="form-group  field">
                                            <input autocomplete="on" type="text" class="form-control" required id="ZipPostalCode" placeholder="کد پستی" maxlength="10" name="ZipPostalCode" />
                                            @*<label for="ZipPostalCode" title="کد پستی" data-title="کد پستی"></label>*@
                                        </div>
                                        <div class="form-group  field">
                                            <input autocomplete="on" type="text" class="form-control" placeholder="آدرس" required id="Address1" name="Address1" />
                                            @*<label for="Address1" title="آدرس" data-title="آدرس"></label>*@
                                            <input type="hidden" id="addressType" name="addressType" />
                                            <input type="hidden" id="newOldAddress" name="newOldAddress" />
                                            <input type="hidden" id="tehranAreaId" name="tehranAreaId" />
                                            <input type="hidden" id="isInCityArea" name="isInCityArea" />
                                        </div>
                                        <div class="form-group field">
                                            <input autocomplete="on" type="text" class="form-control" id="Company" placeholder="نام شرکت" required name="Company" />
                                            @*<label for="Company" title="نام شرکت" data-title="نام شرکت"></label>*@
                                        </div>
                                        <div class="form-group  field">
                                            <input autocomplete="on" type="text" class="form-control" id="Email" placeholder="پست الکترونیک" required name="Email" />
                                            @*<label for="Email" title="پست الکترونیک" data-title="پست الکترونیک"></label>*@
                                        </div>

                                    </div>
                                </div>

                                <div id="mapBox" class="mw-100" style="height:485px !important">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="padding:0 !important" id="mapModalFoter">
                    <div class="col-md-12">
                        <div class="form-group">


                            @*<a class="btn btn-danger faa-parent animated-hover confirmAddress" style="margin-left:10px;color: white;" id="searchOnMap" title="نقشه">
                                    <i class="fa fa-map-marker" aria-hidden="true" style="color: white;"></i>
                                </a>

                                <a class="btn btn-info faa-parent animated-hover confirmAddress" style="margin-left:10px;color: white;" id="searchOldAddress" title="جستجوی آدرس های قبلی">
                                    <i class="fa fa-search" aria-hidden="true" style="color: white;"></i>
                                </a>*@
                            <a class="btn btn-success ContinueAddress" style="color: white;width:49%;display:none" id="ContinueAddress" title="تایید و ادامه">
                                ادامه
                            </a>
                            <a class="btn btn-success confirmAddress" style="color: white;width:49%" id="confirmAddress" title="تایید و ثبت آدرس">
                                ثبت
                            </a>
                            <a id="cleanAddressItem" title="پاک کردن" class="btn" style="border: 1px solid #ccc;border-radius: 3px;width:49%">
                                انصراف
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modal_Video1" class="modal fade" role="dialog" style="width:100%;margin:0px auto;height:100%;background-color:dimgrey;">
        <div class="videoPlayer">
            <video class="videoPlayer_video">
                <source src="~/Plugins/Nop.Plugin.Misc.PostbarDashboard/Video/2.mp4" type="video/mp4" />
            </video>
            <div class="videoPlayer_cover" style="background-image:url('../Plugins/Nop.Plugin.Misc.PostbarDashboard/Scripts/images/taylor_swit_ours.png')">
                <p>
                    <span class="fa fa-play fa-3x"></span>
                </p>
                <p>
                    کلیک کنید
                </p>
            </div>
            <div class="videoPlayer_buttons">
                <ul>
                    <li data-button="play" class="fa fa-play fa-lg"></li>
                    <li data-button="current">0:0</li>
                    <li data-button="timeline" class="timeline">
                        <div class="timeline-loaded">
                            <div class="timeline-current"></div>
                        </div>
                    </li>
                    <li data-button="duration">02:05</li>
                    <li data-button="mute" class="fa fa-volume-up fa-lg"></li>
                    <li data-button="fullscreen" class="fa fa-expand fa-lg"></li>
                </ul>
            </div>
        </div>

        <script>

        </script>
    </div>
    <div class="modal fade" id="modal_postalBans" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="color:white;background:#d4006f;">
                    <h3 class="modal-title" style="text-align:center;">ممنوعات پستی</h3>
                    <button type="button" class="close" data-dismiss="modal" style="color:white;margin:0px;padding:0px">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="col-md-12">
                        <img src="~/Themes/Ap/images/postalBans1.jpg" />
                    </div>
                    <div class="col-md-12">
                        <img src="~/Themes/Ap/images/postalBans2.jpg" />
                    </div>
                    <div class="col-md-12">
                        <img src="~/Themes/Ap/images/postalBans3.jpg" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="~/Plugins/Orders.MultiShipping/Content/Sep_newCheckout.js?ver=145"></script>
<script>
    function validateDateInput(input) {
        $(input).val(ToJsutNumber($(input).val()));
    }
    var IsForegin =@(IsForegin.ToString().ToLower());
    var IsHeavy =@(IsHeavy.ToString().ToLower());
    $(document).ready(function () {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(setPosition);
            function setPosition(position) {
                $('#SenderLat').val(position.coords.latitude);
                $('#SenderLon').val(position.coords.longitude);
            }
        }
        $('.top-bar').hide();

        $('#tableSelect tr').click(function () {
            $(this).find('td input:radio').prop('checked', true);
        });

        var options = {
            document: document,
            wizard: '#wizard',
            WeightItem: '#Weight_g',
            InsuranceItem: '#Insurance',
            CountryItem: '#Country',
            StateItem: '#State',
            kartonSizeItem: '#KartonLafaf',
            IsAgent:@(Model.IsAgent.ToString().ToLower()),
            IsInCodRole:@(Model.IsInCodRole.ToString().ToLower()),
            IsForegin:@(IsForegin.ToString().ToLower()),
            IsHeavy:@(IsHeavy.ToString().ToLower())
        };
        var form = new newCheckout(options);
        //$('#AddressContent').click(function (e) {

        //    e.stopPropagation();
        //    if ($(e.target).parent().attr('Id') == 'confirmAddressItem') {
        //        confirmAddressItem();
        //    }
        //    else if ($(e.target).parent().attr('Id') == 'cancelAddressItem') {
        //        cancelAddressItem();
        //    }
        //});
//===================================Map config===============================================================================

//===================================Map config===============================================================================
        //$('#mapModal').on('shown.bs.modal', function () {
        //    setTimeout(function () {
        //        map.invalidateSize();
        //        $('a').attr('tabindex', '-1');
        //    }, 300);
        //});
       
        $("input[type=text]").focus(function () {
            $(this).select();
        });
        document.getElementById('Count').addEventListener('input', event =>
            event.target.value = addNeg(event.target.value, 'Count')
        );
        document.getElementById('ApproximateValue').addEventListener('input', event =>
            event.target.value = addNeg(event.target.value, 'ApproximateValue')
        );
        document.getElementById('Weight_g').addEventListener('input', function (event) {
            event.target.value = addNeg(event.target.value, 'Weight_g');
            if (@(IsHeavy.ToString().ToLower())== true) {
                var weight = parseInt(event.target.value);
                $('#UbbraTruckType').find('option').each(function () {
                    if ($(this).val() == 0)
                        return;
                    if (parseInt($(this).attr('data-MaxWeight')) < weight)
                    {
                        $(this).attr('disabled', 'disabled');
                    }
                    else
                        $(this).removeAttr('disabled');
                });
                $('#UbbraTruckType').select2('destroy');
                $('#UbbraTruckType').select2({ minimumResultsForSearch: Infinity });
            }
        });

        document.getElementById('ZipPostalCode').addEventListener('input', event =>
            event.target.value = ToJsutNumber(event.target.value)
        );
        document.getElementById('PhoneNumber').addEventListener('input', event =>
            event.target.value = ToJsutNumber(event.target.value)
        );
        @if(!IsHeavy)
        { <Text>
            document.getElementById('height').addEventListener('input', event =>
                event.target.value = addNeg(event.target.value, 'height')
            );

            document.getElementById('width').addEventListener('input', event =>
                event.target.value = addNeg(event.target.value, 'width')
            );

            document.getElementById('length').addEventListener('input', event =>
                event.target.value = addNeg(event.target.value, 'length')
        );

        </Text>}
        function addNeg(value,name) {
            if ((value.replace(/,/g, '')).length >= 9) {
                value = value.replace(/,/g, '').substring(0, 9);
            }
            var result = ToLocalInt(value);
            if (name == 'Weight_g') {
                if (!IsHeavy && parseInt(result.replace(/,/g, '')) > 1000) {
                    //$('#boxType').val('بسته');
                    //if (!IsForegin)
                    //    $('#height').parent().parent().parent().show();
                }
                else if (!IsHeavy && parseInt(result.replace(/,/g, '')) <= 1000) {
                    //$('#boxType').val('پاکت');
                    //if (!IsForegin) {
                    //    $('#height').parent().parent().parent().hide();
                    //    $('#height').val('');
                    //    $('#length').val('');
                    //    $('#width').val('');
                    //}
                }
            }
            if (name == 'Count' && parseInt(result.replace(/,/g, '')) > 1000) {
                alert('تعداد مجاز در هر سفارش 1000 عدد می باشد', 1);
                return 1000;
            }
            if (IsForegin) {
                if (name == 'Weight_g' && parseInt(result.replace(/,/g, '')) > 30000) {
                    alert( 'حداکثر وزن مجاز 2000 گرم(2 کیلو گرم) در هر بسته می باشد', 1);
                    result = 30000;
                }
                else if ((name == 'height' || name == 'width' || name == 'length') && parseInt(result.replace(/,/g, '')) > 100) {
                    sanPardakht.application.showMessageBox('محدودیت ابعاد', 'حداکثر ابعاد مجاز برای سرویس بین الملی: 100 سانتیمتر*100 سانتیمتر*100 سانتیمتر می باشد',1);
                    result = 100;
                }
            }
            else if (IsHeavy) {
                if (name == 'Weight_g' && parseInt(result.replace(/,/g, '')) > 20) {
                    alert( 'حداکثر وزن مجاز برای هر خودرو حداکثر 20 تن می با شد', 1);
                    result = 20;
                }
            }
            else {
                if (name == 'Weight_g' && parseInt(result.replace(/,/g, '')) > 100000) {
                    alert( 'حداکثر وزن مجاز 100000 گرم(100 کیلو گرم) در هر بسته می باشد', 1);
                    result = 100000;
                }
                else if ((name == 'height' || name == 'width' || name == 'length') && parseInt(result.replace(/,/g, '')) > 300) {
                    sanPardakht.application.showMessageBox('محدودیت ابعاد','حداکثر ابعاد مجاز برای سرویس پست داخلی: 300 سانتیمتر*300 سانتیمتر*300 سانتیمتر می باشد',1);
                    result = 0;
                }
            }
           return result.toLocaleString('en-US');
        }

        $('a').attr('tabindex', '-1');
        $('#_NewAddress').find('input').click(function () {
            myItem = $(this);
            setTimeout(myItem.focus(), 300);
        });

    });
</script>
<script>

    //get mouse parent position
    function getPositionData(el) {
        var xPosition = 0;
        var yPosition = 0;
        while (el) {
            if (el.tagName == "BODY") {
                // deal with browser quirks with body/window/document and page scroll
                var xScrollPos = el.scrollLeft || document.documentElement.scrollLeft;
                var yScrollPos = el.scrollTop || document.documentElement.scrollTop;

                xPosition += (el.offsetLeft - xScrollPos + el.clientLeft);
                yPosition += (el.offsetTop - yScrollPos + el.clientTop);
            } else {
                xPosition += (el.offsetLeft - el.scrollLeft + el.clientLeft);
                yPosition += (el.offsetTop - el.scrollTop + el.clientTop);
            }

            el = el.offsetParent;
        }
        return {
            x: xPosition,
            y: yPosition
        };
    }
    //video player class
    function videoPlayer() {
        //the parent element
        videoPlayer.prototype.elem = null;
        //the video tag element
        videoPlayer.prototype.video = null;
        //the src of video
        videoPlayer.prototype.file = null;
        //video player cover
        videoPlayer.prototype.cover = null;
        //video player buttons
        videoPlayer.prototype.play_btn = null;
        videoPlayer.prototype.tex_current = null;
        videoPlayer.prototype.timeline_btn = null;
        videoPlayer.prototype.text_duration = null;
        videoPlayer.prototype.mute_btn = null;
        videoPlayer.prototype.expand_btn = null;

        //starts the video player
        this.init = function (elem) {
            //add new function to window for element event listener
            window.listenElem = function (event, obj, func) {
                obj.addEventListener(event, func, false);
            }
            //add new function to window for elements event listener
            window.listenElems = function (event, objs, func) {
                var len = objs.length;
                for (var i = 0; i < len; i++) {
                    objs[i].addEventListener(event, func, false);
                }
            }

            //set parent elem for video player
            videoPlayer.elem = elem;
            //set video cover
            videoPlayer.cover = elem.getElementsByClassName("videoPlayer_cover")[0];
            //set video elem
            videoPlayer.video = elem.getElementsByClassName("videoPlayer_video")[0];
            videoPlayer.file = videoPlayer.video.src;
            var videoPlayer_buttons = elem.querySelectorAll(".videoPlayer_buttons ul li");
            //find buttons and put them into vars
            for (var i = 0; i < videoPlayer_buttons.length; i++) {
                switch (videoPlayer_buttons[i].getAttribute("data-button")) {
                    case "play":
                        videoPlayer.play_btn = videoPlayer_buttons[i];
                        break;
                    case "current":
                        videoPlayer.text_current = videoPlayer_buttons[i];
                        break;
                    case "timeline":
                        videoPlayer.timeline_btn = videoPlayer_buttons[i];
                        break;
                    case "duration":
                        videoPlayer.text_duration = videoPlayer_buttons[i];
                        break;
                    case "mute":
                        videoPlayer.mute_btn = videoPlayer_buttons[i];
                        break;
                    case "fullscreen":
                        videoPlayer.expand_btn = videoPlayer_buttons[i];
                        break;
                    default:
                        console.warn("a btn is not valid");
                        break;
                }
            }

            /***
            add some event listeners for controling every thing:
            ***/

            //add event listener for video cover
            window.listenElem("click", videoPlayer.cover, this.videoCoverClicked);

            //add event listener for play button on first page
            window.listenElems("click", videoPlayer_buttons, this.buttonsClicked);

            //add event for updating time label when music is playing
            window.listenElem("timeupdate", videoPlayer.video, this.updatePlayerTime);

            //add event listener for player when music had been ended
            window.listenElem("ended", videoPlayer.video, this.endPlayerTime);

            //add event listener for player when music had been paused
            window.listenElem("play", videoPlayer.video, this.playedPlayer);

            //add event listener for player when music had been played
            window.listenElem("pause", videoPlayer.video, this.pausedPlayer);

            //add event listener for progressing
            window.listenElem("progress", videoPlayer.video, this.progressPlayer);

            //add event listener for loading meta data
            window.listenElem("loadedmetadata", videoPlayer.video, this.progressPlayer);

            //add event listener for volume change

            window.listenElem("volumechange", videoPlayer.video, this.volumechange);

            //add event listener for error on music player
            window.listenElem("error", videoPlayer.video, this.errorPlayer);
        }

        /*functions for control actions*/

        this.videoCoverClicked = function (event) {
            //alert('1');
            event.currentTarget.style.display = "none";
            if (videoPlayer.video === undefined || typeof videoPlayer.video === null) {
                console.warn("cant find video tag with class='videoPlayer_video'");
            } else {
                videoPlayer.video.play();
            }
            event.preventDefault();
            return false;
        };

        this.buttonsClicked = function (event) {

            switch (event.currentTarget.getAttribute("data-button")) {
                case "play":
                    //console.log("play");
                    if (videoPlayer.video.paused) {
                        if (videoPlayer.video.duration > 0) {
                            videoPlayer.video.play();
                        } else {
                            videoPlayer.play(videoPlayer.file);
                        }
                    } else {
                        if (videoPlayer.video.duration > 0) {
                            videoPlayer.video.pause();
                        } else {
                            videoPlayer.play(videoPlayer.file);
                        }
                    }
                    break;
                case "timeline":
                    //alert('کاربر گرامی شما نمیتوانید ویدئو را به جلو ببرید');
                    if (videoPlayer.video.duration > 0) {
                        var parentPosition = getPositionData(event.currentTarget);
                        var mousex = event.clientX - parentPosition.x;
                        var timelineWidth = parseFloat(videoPlayer.timeline_btn.offsetWidth);
                        var newCurrentTime = (parseFloat(mousex) * parseFloat(videoPlayer.video.duration)) / parseFloat(timelineWidth);
                        console.log(mousex + "/" + timelineWidth);
                        videoPlayer.video.currentTime = newCurrentTime;
                    }
                    ;
                    break;
                case "mute":
                    //console.log('volume');
                    if (videoPlayer.video.muted === false) {
                        videoPlayer.video.muted = true;
                        event.currentTarget.className = "fa fa-volume-off fa-lg";
                    } else {
                        videoPlayer.video.muted = false;
                        event.currentTarget.className = "fa fa-volume-up fa-lg";
                    }
                    break;
                case "fullscreen":
                    if (!document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
                        event.currentTarget.className = "fa fa-compress fa-lg";
                        if (videoPlayer.elem.requestFullscreen) {
                            videoPlayer.elem.requestFullscreen();
                        } else if (videoPlayer.elem.msRequestFullscreen) {
                            videoPlayer.elem.msRequestFullscreen();
                        } else if (videoPlayer.elem.mozRequestFullScreen) {
                            videoPlayer.elem.mozRequestFullScreen();
                        } else if (videoPlayer.elem.webkitRequestFullscreen) {
                            videoPlayer.elem.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
                        } else {
                            event.currentTarget.className = "fa fa-expand fa-lg";
                            alert( 'مرورگر شما قابلیت تمام صفحه شدن ویدئو را پشتیبانی نمیکند', 1);
                        }
                    } else {
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.msExitFullscreen) {
                            document.msExitFullscreen();
                        } else if (document.mozCancelFullScreen) {
                            document.mozCancelFullScreen();
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        }
                        event.currentTarget.className = "fa fa-expand fa-lg";
                    }
                    break;
                default:
                    console.warn("the button you have clicked is not valid");
                    break;
            }
        }

        this.updatePlayerTime = function (event) {

            var minutes = Math.floor(parseInt(this.currentTime) / 60);
            var seconds = parseInt(this.currentTime) - (minutes * 60);
            var show = (minutes < 10 ? '0' + minutes : minutes) + ':' + (seconds < 10 ? '0' + seconds : seconds);
            if (isNaN(this.currentTime)) { show = "00:00"; }
            videoPlayer.text_current.innerHTML = show;
            minutes = Math.floor(parseInt(this.duration) / 60);
            seconds = parseInt(this.duration) - (minutes * 60);
            show = (minutes < 10 ? '0' + minutes : minutes) + ':' + (seconds < 10 ? '0' + seconds : seconds);
            if (!isNaN(this.duration)) {
                videoPlayer.text_duration.innerHTML = show;
            }
            //timeline move:
            var timeline = videoPlayer.timeline_btn;
            var timelineWidth = parseFloat(timeline.offsetWidth);
            // var playedPercent=parseInt(parseFloat(this.currentTime*100)/parseFloat(this.duration));
            var playedWidth = parseFloat(parseFloat(this.currentTime) * parseFloat(timelineWidth) / parseFloat(this.duration));
            timeline.firstElementChild.firstElementChild.style.width = playedWidth + "px";
        };

        this.endPlayerTime = function (event) {

            videoPlayer.play_btn.className = "fa fa-play fa-lg";
            videoPlayer.video.currentTime = 0;
        };

        this.playedPlayer = function (event) {
            //alert('5');
            videoPlayer.play_btn.className = "fa fa-pause fa-lg";
            videoPlayer.cover.style.display = "none";


        };

        this.pausedPlayer = function (event) {
            //alert('6');
            videoPlayer.play_btn.className = "fa fa-play fa-lg";
        };

        this.progressPlayer = function (event) {
            //alert('7');
            //timeline move:
            var timeline = videoPlayer.timeline_btn;
            var timelineWidth = parseFloat(timeline.offsetWidth);
            if (this.buffered.length > 0) {
                var bufferedPercent = parseFloat(parseFloat(parseFloat(this.buffered.end(this.buffered.length - 1)) * 100) / parseFloat(this.duration));
                var bufferedWidth = parseFloat(parseFloat(this.buffered.end(this.buffered.length - 1)) * parseFloat(timelineWidth) / parseFloat(this.duration));
                timeline.firstElementChild.style.width = bufferedPercent + "%";
            } else {
                timeline.firstElementChild.style.width = "100%";
            }
        };

        this.volumechange = function (event) {
            //alert('8');
            if (videoPlayer.video.muted === true) {
                videoPlayer.mute_btn.className = "fa fa-volume-off fa-lg";
            } else {
                videoPlayer.mute_btn.className = "fa fa-volume-up fa-lg";
            }
        }

        this.errorPlayer = function (event) {
            //alert(event);
            videoPlayer.play_btn.className = "fa fa-warning fa-lg";
        };
    }
    $(document).ready(function () {

        (new videoPlayer).init(
            document.querySelector(".videoPlayer")
        );
        if (/Android [4-6]/.test(navigator.appVersion)) {
            window.addEventListener("resize", function () {
                if (document.activeElement.tagName == "INPUT" || document.activeElement.tagName == "TEXTAREA") {
                    window.setTimeout(function () {
                        document.activeElement.scrollIntoViewIfNeeded();
                    }, 0);
                }
            })
        }
    });
</script>
<style>

    /*adding some styles for my custom html5 video player*/
    .videoPlayer {
        display: block;
        width: 100%;
        max-width: 100%;
        height: 100%;
        overflow: hidden;
        background: #000;
        position: relative;
        font-size: 100%;
        font-family: tahoma;
    }

    .videoPlayer_video {
        padding: 0px;
        margin: 0px;
        width: 100%;
        height: 100%;
        display: block;
    }

    .videoPlayer_cover {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.3);
        background-size: cover;
        opacity: 0.8;
        text-align: center;
    }

        .videoPlayer_cover p {
            text-align: center;
            color: #FFF;
        }

            .videoPlayer_cover p span {
                margin-top: 8%;
            }

            .videoPlayer_cover p:nth-child(2) {
                font-size: 200%;
            }

    .videoPlayer_buttons {
        position: absolute;
        bottom: 0px;
        left: 0px;
        text-align: center;
        display: block;
        width: 100%;
        padding: 0px;
        margin: 0px;
        background: rgba(31,30,33,0.3);
        border-top: solid 1px rgba(31,30,33,0.5);
    }

        .videoPlayer_buttons ul {
            text-align: center;
            color: #FFF;
            display: block;
            padding: 0px;
            text-indent: 0px;
        }

            .videoPlayer_buttons ul li {
                display: inline-block;
                list-style: none;
                padding: 5px 5px;
                cursor: pointer;
            }

    .timeline {
        width: 45%;
        overflow: hidden;
        margin: 13px 5px;
        box-shadow: 0px 0px 5px 0px #000,inset 0px 0px 3px 0px #FFF;
        vertical-align: top;
        border-radius: 3px;
        background-color: #8f9598;
        padding: 0px !important;
    }

    .timeline-loaded {
        background-color: #c1c6c9;
        padding: 0px;
        margin: 0px;
        width: 0%;
    }

    .timeline-current {
        background-color: #dc3932 !important;
        padding: 4px 0px;
        margin: 0px;
        width: 0%;
    }
</style>

<script>

    //window.onload = load;
    //function load() {
    //    $.ajax({
    //        cache: true,
    //        type: "GET",
    //        url: "/PostbarDashboard/GetStateViewVideoCustomer",
    //        data: {},
    //        success: function (data) {
    //            if (data.state == 0) {
    //                $(modal_Video1).modal('show');
    //            }
    //        },
    //        error: function (xhr, ajaxOptions, thrownError) {
    //            console.log('خطا در دریافت اطلاعات مشتری');
    //        }
    //    });
    //}



</script>

<style>

    .modal-body {
        max-height: calc(100vh - 100px);
        overflow-y: auto;
        background-color: white;
    }
</style>

<script type="text/javascript">
    function divload() {
        $('#_RuleModal').modal('show');
    }
    function divload1() {
        $('#Rule1Modal').modal('show');
    }
    $('#_RuleModal').on('show.bs.modal', function () {
        $(this).find('.modal-body').css({
            width: 'auto', //probably not needed
            height: 'auto', //probably not needed
            'max-height': '100%'
        });
    });
    $('#modal_Video1').on('shown.bs.modal', function () {
        $.ajax({
            type: "POST",
            url: "/PostbarDashboard/ViewVideo",
            data: null,
            success: function (data) {


            },
            error: function (data) {

                //alert(data);

            }
        });
    })
</script>

<div class="modal fade" id="Rule1Modal" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header" style="color:white;background:#ffc107;">
                <h3 class="modal-title" style="text-align:center;">جعبه های استاندارد پستی</h3>
                <button type="button" class="close" data-dismiss="modal" style="color:white;margin:0px;padding:0px">&times;</button>
            </div>
            <div class="modal-body">
                <p><span>جعبه های استاندارد پستی چست؟</span></p>
                <p>
                    <span>سایز جعبه استاندارد پستی میبایستی </span>
                    <span>۳</span><span> تا </span><span>۵</span><span> لایه باشد تا در مسیر جابجایی پستی جعبه متلاشی نگردد.</span>
                </p>
                <p><span>حالا شما میتوانید با استفاده از گزینه خرید بسته استاندارد پستی از این سرویس توسط هر یک از فعالین پستی برخوردار شوید</span></p>
                <p><span>سایز بسته های استاندارد پستی به شرح ذیل میباشد</span></p>
                <div class="col-md-12"><img src="~/images/uploaded/shipito/2334.jpg" /></div>
                <div class="col-md-12"><img src="~/images/uploaded/shipito/Untitled4.png" /></div>
            </div>

        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {


        $("#HasAccessToPrinter").change(function () {
            debugger;
            var str = HasAccessToPrinter.value;
            if (str == "true") {
                alert( "مشتری محترم چنانچه به پرینتر دسترسی دارید میبایستی در انتهای سفارش فاکتور - بارکد تولید شده را دانلود و سپس پرینت و به درستی روی جعبه به نحوی بچسبانید که انتهای فرایند از روی جعبه جدا نشود", 1);
            }
            if (str == "false") {
                alert( "مشتری محترم چنانچه به پرینتر دسترسی ندارید میبایستی آدرس فرستنده و گیرنده و شماره سفارش را بروی جعبه پستی خود مطابق با آدرسهای مندرج در سفارش درج نمایید.", 1);
            }

        });

        $("#BoxNo").click(function () {
            debugger;
            if (this.checked) {
                alert( "مشتری محترم جعبه استاندارد پستی میبایستی کارتنی 3 تا 5 لایه باشد و از قرار دادن مرسوله در داخل کیسه پلاستیکی یا گونی یا هر بسته بندی غیر از کارتن در بسته و چسب کاری شده پرهیز نمایید", 1);

                $("#cmbkarton").css("display", "none");
                //x.style.display = "none";
                $("#cmbkarton").hide();
                $('#KartonLafaf option[value="0"]').remove();
                $("#KartonLafaf").prepend('<option value="کارتن نیاز ندارم." selected ="true">کارتن نیاز ندارم.</option>');

            }
            else {

            }
        });
        $("#BoxYes").click(function () {
            debugger;
            alert( "مشتری محترم کارتن و لفاف بندی درخواستی شما در محل دفتر نمایندگی انجام می پذیرد ", 1);
            if (this.checked) {
                //x.style.display = "block";
                $("#cmbkarton").css("display", "block");
                //x.style.display = "block";
                $("#cmbkarton").show();
                $('#KartonLafaf option[value="کارتن نیاز ندارم."]').remove();
                $("#KartonLafaf").prepend('<option value="0" selected ="true">سایز کارتون مورد نظر را انتخاب کنید(ابعاد به سانتیمتر)</option>');
            }
            else {

            }
        });
    });
    $(document).ready(function () {
        $('.content.clearfix').css('min-height', ($('body').height() - (55 + $('.navbar.navbar-dark.fixed-bottom.nav-bottom-sm.d-lg-none.d-xl-none').height())));

        $('#PostCoordinationData').click(function () {
            $('#_PostCoordinationData').click();
        });
        $('#dispatch_date').click(function () {
            $('#_dispatch_date').click();
        });
    });
   
</script>